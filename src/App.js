import React, { Component } from 'react';
import './App.css';
import Graph from './Graph.js';
import Form from './Form.js';
import Totals from './Totals.js'
// import algorithm from './arbitrage-algorithm.js';

// console.log(algorithm());


class App extends Component {
  constructor(props){
    super(props);
    this.state = {
      maxMarginalHour: 1
    }
    this.handleChange = this.handleChange.bind(this); // no performance hit using this, and don't have to worry about binding this anywhere else. 
  }

  handleChange(event){
    this.setState({maxMarginalHour: parseInt(event.target.value)})
  }
  render() {
    let data = JSON.parse(`[{"marginalHour":0,"date":"2015-12-31","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T08:00:00-00:00","operatingHour":24,"nodeId":"LAPLMG1_7_B2","price":28.83414,"duration":60,"startTimeGMT":"2016-01-01T07:00:00-00:00","transaction":"buy"},{"marginalHour":0,"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T09:00:00-00:00","operatingHour":1,"nodeId":"LAPLMG1_7_B2","price":30.63312,"duration":60,"startTimeGMT":"2016-01-01T08:00:00-00:00","transaction":"sell"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T10:00:00-00:00","operatingHour":2,"nodeId":"LAPLMG1_7_B2","price":29.3315,"duration":60,"startTimeGMT":"2016-01-01T09:00:00-00:00"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T11:00:00-00:00","operatingHour":3,"nodeId":"LAPLMG1_7_B2","price":29.22908,"duration":60,"startTimeGMT":"2016-01-01T10:00:00-00:00"},{"marginalHour":0,"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T12:00:00-00:00","operatingHour":4,"nodeId":"LAPLMG1_7_B2","price":27.55431,"duration":60,"startTimeGMT":"2016-01-01T11:00:00-00:00","transaction":"buy"},{"marginalHour":1,"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T13:00:00-00:00","operatingHour":5,"nodeId":"LAPLMG1_7_B2","price":27.79299,"duration":60,"startTimeGMT":"2016-01-01T12:00:00-00:00","transaction":"buy"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T14:00:00-00:00","operatingHour":6,"nodeId":"LAPLMG1_7_B2","price":28.96056,"duration":60,"startTimeGMT":"2016-01-01T13:00:00-00:00"},{"marginalHour":0,"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T15:00:00-00:00","operatingHour":7,"nodeId":"LAPLMG1_7_B2","price":30.14851,"duration":60,"startTimeGMT":"2016-01-01T14:00:00-00:00","transaction":"sell"},{"marginalHour":1,"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T16:00:00-00:00","operatingHour":8,"nodeId":"LAPLMG1_7_B2","price":29.22271,"duration":60,"startTimeGMT":"2016-01-01T15:00:00-00:00","transaction":"sell"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T17:00:00-00:00","operatingHour":9,"nodeId":"LAPLMG1_7_B2","price":26.55833,"duration":60,"startTimeGMT":"2016-01-01T16:00:00-00:00"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T18:00:00-00:00","operatingHour":10,"nodeId":"LAPLMG1_7_B2","price":24.39231,"duration":60,"startTimeGMT":"2016-01-01T17:00:00-00:00"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T19:00:00-00:00","operatingHour":11,"nodeId":"LAPLMG1_7_B2","price":22.46487,"duration":60,"startTimeGMT":"2016-01-01T18:00:00-00:00"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T20:00:00-00:00","operatingHour":12,"nodeId":"LAPLMG1_7_B2","price":20.23251,"duration":60,"startTimeGMT":"2016-01-01T19:00:00-00:00"},{"marginalHour":0,"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T21:00:00-00:00","operatingHour":13,"nodeId":"LAPLMG1_7_B2","price":19.06359,"duration":60,"startTimeGMT":"2016-01-01T20:00:00-00:00","transaction":"buy"},{"marginalHour":1,"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T22:00:00-00:00","operatingHour":14,"nodeId":"LAPLMG1_7_B2","price":19.08756,"duration":60,"startTimeGMT":"2016-01-01T21:00:00-00:00","transaction":"buy"},{"marginalHour":2,"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-01T23:00:00-00:00","operatingHour":15,"nodeId":"LAPLMG1_7_B2","price":19.82645,"duration":60,"startTimeGMT":"2016-01-01T22:00:00-00:00","transaction":"buy"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T00:00:00-00:00","operatingHour":16,"nodeId":"LAPLMG1_7_B2","price":23.17632,"duration":60,"startTimeGMT":"2016-01-01T23:00:00-00:00"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T01:00:00-00:00","operatingHour":17,"nodeId":"LAPLMG1_7_B2","price":31.57233,"duration":60,"startTimeGMT":"2016-01-02T00:00:00-00:00"},{"marginalHour":1,"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T02:00:00-00:00","operatingHour":18,"nodeId":"LAPLMG1_7_B2","price":42.96684,"duration":60,"startTimeGMT":"2016-01-02T01:00:00-00:00","transaction":"sell"},{"marginalHour":0,"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T03:00:00-00:00","operatingHour":19,"nodeId":"LAPLMG1_7_B2","price":43.9682,"duration":60,"startTimeGMT":"2016-01-02T02:00:00-00:00","transaction":"sell"},{"marginalHour":2,"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T04:00:00-00:00","operatingHour":20,"nodeId":"LAPLMG1_7_B2","price":42.63064,"duration":60,"startTimeGMT":"2016-01-02T03:00:00-00:00","transaction":"sell"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T05:00:00-00:00","operatingHour":21,"nodeId":"LAPLMG1_7_B2","price":39.47067,"duration":60,"startTimeGMT":"2016-01-02T04:00:00-00:00"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T06:00:00-00:00","operatingHour":22,"nodeId":"LAPLMG1_7_B2","price":35.81652,"duration":60,"startTimeGMT":"2016-01-02T05:00:00-00:00"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T07:00:00-00:00","operatingHour":23,"nodeId":"LAPLMG1_7_B2","price":33.0597,"duration":60,"startTimeGMT":"2016-01-02T06:00:00-00:00"},{"date":"2016-01-01","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T08:00:00-00:00","operatingHour":24,"nodeId":"LAPLMG1_7_B2","price":29.37703,"duration":60,"startTimeGMT":"2016-01-02T07:00:00-00:00"},{"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T09:00:00-00:00","operatingHour":1,"nodeId":"LAPLMG1_7_B2","price":29.36158,"duration":60,"startTimeGMT":"2016-01-02T08:00:00-00:00"},{"marginalHour":2,"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T10:00:00-00:00","operatingHour":2,"nodeId":"LAPLMG1_7_B2","price":28.46559,"duration":60,"startTimeGMT":"2016-01-02T09:00:00-00:00","transaction":"buy"},{"marginalHour":0,"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T11:00:00-00:00","operatingHour":3,"nodeId":"LAPLMG1_7_B2","price":27.51491,"duration":60,"startTimeGMT":"2016-01-02T10:00:00-00:00","transaction":"buy"},{"marginalHour":1,"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T12:00:00-00:00","operatingHour":4,"nodeId":"LAPLMG1_7_B2","price":27.51733,"duration":60,"startTimeGMT":"2016-01-02T11:00:00-00:00","transaction":"buy"},{"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T13:00:00-00:00","operatingHour":5,"nodeId":"LAPLMG1_7_B2","price":28.67352,"duration":60,"startTimeGMT":"2016-01-02T12:00:00-00:00"},{"marginalHour":1,"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T14:00:00-00:00","operatingHour":6,"nodeId":"LAPLMG1_7_B2","price":28.98998,"duration":60,"startTimeGMT":"2016-01-02T13:00:00-00:00","transaction":"sell"},{"marginalHour":0,"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T15:00:00-00:00","operatingHour":7,"nodeId":"LAPLMG1_7_B2","price":29.08378,"duration":60,"startTimeGMT":"2016-01-02T14:00:00-00:00","transaction":"sell"},{"marginalHour":2,"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T16:00:00-00:00","operatingHour":8,"nodeId":"LAPLMG1_7_B2","price":28.87312,"duration":60,"startTimeGMT":"2016-01-02T15:00:00-00:00","transaction":"sell"},{"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T17:00:00-00:00","operatingHour":9,"nodeId":"LAPLMG1_7_B2","price":26.49613,"duration":60,"startTimeGMT":"2016-01-02T16:00:00-00:00"},{"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T18:00:00-00:00","operatingHour":10,"nodeId":"LAPLMG1_7_B2","price":23.63081,"duration":60,"startTimeGMT":"2016-01-02T17:00:00-00:00"},{"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T19:00:00-00:00","operatingHour":11,"nodeId":"LAPLMG1_7_B2","price":23.31061,"duration":60,"startTimeGMT":"2016-01-02T18:00:00-00:00"},{"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T20:00:00-00:00","operatingHour":12,"nodeId":"LAPLMG1_7_B2","price":23.24625,"duration":60,"startTimeGMT":"2016-01-02T19:00:00-00:00"},{"marginalHour":1,"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T21:00:00-00:00","operatingHour":13,"nodeId":"LAPLMG1_7_B2","price":20.37858,"duration":60,"startTimeGMT":"2016-01-02T20:00:00-00:00","transaction":"buy"},{"marginalHour":0,"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T22:00:00-00:00","operatingHour":14,"nodeId":"LAPLMG1_7_B2","price":18.75932,"duration":60,"startTimeGMT":"2016-01-02T21:00:00-00:00","transaction":"buy"},{"marginalHour":2,"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-02T23:00:00-00:00","operatingHour":15,"nodeId":"LAPLMG1_7_B2","price":21.86656,"duration":60,"startTimeGMT":"2016-01-02T22:00:00-00:00","transaction":"buy"},{"date":"2016-01-02","createDate":"2019-06-13T18:07:36+00:00","endTimeGMT":"2016-01-03T00:00:00-00:00","operatingHour":16,"nodeId":"LAPLMG1_7_B2","price":22.96197,"duration":60,"startTimeGMT":"2016-01-02T23:00:00-00:00"}]`);

    return (
      <div className="App">
        <Totals data={data}></Totals>
        <Form handleChange={this.handleChange}  maxMarginalHour={this.state.maxMarginalHour} formMaxMarginalHours={data.length -1}></Form>
        <Graph data={data} maxMarginalHour={this.state.maxMarginalHour}></Graph>
      </div>
    );
  }
}

export default App;
